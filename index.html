<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="dengage-js-sdk.js" async></script>
	<script src="fg_deneme.js" ></script>
	<!--<script src="https://appdev.dengage.com/push/sdk/3/b27bee07-ee71-e2c5-6fe2-af39af12e0ee.js" async=""></script>-->s

	<script>
function getTableHtml(components) {
	var html = '<table>';
	for (let i = 0; i < components.length; i++) {
		const c = components[i];
		html += `
		<tr>
			<td>${c.key}</td>
			<td>${c.value}</td>
		</tr>
		`
	}
	html += '</table>';
	return html;
}
	
function getFingerprint() {
	var options = {
		fontsFlash: false,
		extraComponents : [
			/*{
				key: 'customKey', 
				getData: function (done, options) {
					done('infos ...')
				},
			},*/
		]
	};
	Fingerprint2.get(options, function (components) {
		console.log(components) // an array of components: {key: ..., value: ...}
		var values = components.map(function (component) { return component.value })
		var murmur = Fingerprint2.x64hash128(values.join(''), 31)
		document.getElementById('finger_print').innerHTML = getTableHtml(components);
		document.getElementById('hash').innerHTML = murmur;
		
	})
}

window.onload = function() {
	if (window.requestIdleCallback) {
		requestIdleCallback(function () {
			getFingerprint();
		})
	} else {
		setTimeout(function () {
			getFingerprint();
		}, 500)
	}	
};
	</script>


<script>
      /*(function(p, u, s, h, x) {
        p.pushpad =
          p.pushpad ||
          function() {
            (p.pushpad.q = p.pushpad.q || []).push(arguments);
          };
        h = u.getElementsByTagName('head')[0];
        x = u.createElement('script');
        x.async = 1;
        x.src = s;
        h.appendChild(x);
      })(window, document, 'https://pushpad.xyz/pushpad.js');*/

	function sendEvent(table, data) {
		var deviceId = localStorage.getItem('dengage_device_id') || generateUUID();
    	localStorage.setItem('dengage_device_id', deviceId);
		var params = {
			"accountId": "82e7e586-5efa-ef76-7663-1413870c3b76",
			"key": deviceId,
			"eventTable": table,
			"eventDetails": data
		};
		console.log(params);
		var request = fetch('https://eventdev.dengage.com/api/Event', {
			method: 'POST', // *GET, POST, PUT, DELETE, etc.
			mode: 'cors', // no-cors, *cors, same-origin
			cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
			credentials: 'omit', // include, *same-origin, omit
			headers: { 'Content-Type': 'application/json' },
			redirect: 'follow', // manual, *follow, error
			referrer: 'no-referrer', // no-referrer, *client
			body: JSON.stringify(params) // body data type must match "Content-Type" header
		});
	}
	window.onload = function() {
		sendEvent('big_data_20191026', {
			column1: 'muh_deneme'
		});
	};
		</script>

</head>
<body>
	<div id="finger_print">
		
	</div>
	<div id="hash">
		
	</div>
</body>
</html>
